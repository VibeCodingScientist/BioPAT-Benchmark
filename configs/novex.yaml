# BioPAT-NovEx Benchmark Configuration
# 100 expert-curated statements, 3 evaluation tiers

# --- Curation Pipeline ---
curation:
  qrels_path: data/checkpoints/step5_qrels.parquet
  papers_path: data/checkpoints/step4_papers.parquet
  patents_path: data/checkpoints/step2_patents.parquet
  corpus_dir: data/benchmark
  output_dir: data/novex
  budget_usd: 50.0
  seed: 42
  # Quality thresholds
  min_quality_score: 3.5       # Average of self-contained, specific, faithful (1-5)
  candidate_overselect: 120    # Select 120 to filter to 100
  # Category targets (sum = 100)
  categories:
    multi_patent_examiner: 35
    single_patent_examiner: 25
    cross_domain: 15
    applicant_only: 15
    negative_control: 10
  # Domain distribution targets
  domains:
    A61: 40
    C07: 30
    C12: 30

# --- Annotation Protocol ---
annotation:
  output_dir: data/novex/annotation
  budget_usd: 200.0
  candidates_per_statement: 50   # Number of docs to judge per statement
  thinking: true                  # Enable extended reasoning for judgments
  models:
    openai:
      provider: openai
      model_id: gpt-5.2
    anthropic:
      provider: anthropic
      model_id: claude-sonnet-4-6
    google:
      provider: google
      model_id: gemini-3-pro-preview

# --- Evaluation ---
evaluation:
  results_dir: data/novex/results
  budget_usd: 400.0
  seed: 42

  # Tier 1: Retrieval
  tier1:
    top_k: 100
    k_values: [10, 50, 100]
    bm25:
      enabled: true
    dense:
      enabled: false       # Requires GPU — skip on CPU VPS
      models:
        - BAAI/bge-base-en-v1.5
    hybrid:
      enabled: false       # Requires dense index — skip on CPU VPS
      fusion_method: rrf
    hyde:
      enabled: false       # Requires dense index — skip on CPU VPS
    rerank:
      enabled: true
      bm25_top_k: 100
    agent:
      enabled: true
      max_search_calls: 5
      search_top_k: 20
    # LLM models for HyDE, reranking, agent (no thinking — generation tasks)
    llm_models:
      - provider: openai
        model_id: gpt-5.2
      - provider: anthropic
        model_id: claude-sonnet-4-6
      - provider: google
        model_id: gemini-3-pro-preview

  # Tier 2: Relevance Assessment (thinking enabled for deep reasoning)
  tier2:
    max_pairs: null  # null = all (100 statements × 50 docs = 5000)
    thinking: true
    models:
      - provider: openai
        model_id: gpt-5.2
      - provider: anthropic
        model_id: claude-sonnet-4-6
      - provider: google
        model_id: gemini-3-pro-preview

  # Tier 3: Novelty Determination (thinking enabled for synthesis)
  tier3:
    run_zero_shot: true  # Also run without prior art context
    thinking: true
    models:
      - provider: openai
        model_id: gpt-5.2
      - provider: anthropic
        model_id: claude-sonnet-4-6
      - provider: google
        model_id: gemini-3-pro-preview

# --- Analysis ---
analysis:
  output_dir: data/novex/analysis
  generate_latex: true
  generate_figures: true

# --- Budget ---
budget:
  max_total_usd: 700.0    # Curation + Annotation + Evaluation (with thinking)
  warn_at_usd: 600.0
