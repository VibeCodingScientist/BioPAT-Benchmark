# BioPAT Default Configuration
# This file contains the default settings for the benchmark construction pipeline.

phase: "phase1"

# Data paths (relative to project root)
paths:
  data_dir: "data"
  raw_dir: "data/raw"
  processed_dir: "data/processed"
  cache_dir: "data/cache"
  benchmark_dir: "data/benchmark"

# API credentials (can also be set via environment variables)
api:
  patentsview_api_key: "your-first-key"
  patentsview_api_key_2: "your-second-key"
  ncbi_api_key: "your-ncbi-key"
  openalex_email: "your@email.com"
  use_bulk_data: false
  # Phase 6 (v3.0): International patent APIs
  epo_consumer_key: null  # EPO OPS Consumer Key (or set EPO_CONSUMER_KEY env var)
  epo_consumer_secret: null  # EPO OPS Consumer Secret (or set EPO_CONSUMER_SECRET env var)
  wipo_api_token: null  # WIPO PATENTSCOPE API Token (or set WIPO_API_TOKEN env var)

# Phase 1: Minimum Viable Benchmark
phase1:
  # Target dataset size
  target_patent_count: 2000
  target_query_count: 5000

  # Citation filtering
  min_citations: 3
  ros_confidence_threshold: 8

  # IPC code prefixes for biomedical domain
  ipc_prefixes:
    - "A61"  # Medical/veterinary science
    - "C07"  # Organic chemistry (including pharmaceuticals)
    - "C12"  # Biochemistry, genetic engineering

  # Random seed for reproducibility
  seed: 42

# Phase 5: Full Novelty Benchmark (v2.0)
# Extends BioPAT from paper-only retrieval to Full Prior Art Retrieval
phase5:
  # Enable v2.0 dual-corpus mode
  enabled: false

  # Corpus composition settings
  corpus:
    # Include scientific papers (NPL citations)
    include_papers: true
    # Include prior patents in corpus
    include_patents: true
    # Maximum number of prior patents (null = no limit)
    max_prior_patents: null
    # Include IPC-based hard negatives for training
    include_ipc_negatives: false
    # Max IPC negatives per query patent
    max_ipc_negatives_per_query: 10

  # Target corpus size (~500K for v2.0)
  target_corpus_size: 500000

  # Random seed for reproducibility
  seed: 42

# Phase 6: International Patent Coverage (v3.0)
# Extends BioPAT to include EP and WO patents for global prior art retrieval
phase6:
  # Enable v3.0 international mode
  enabled: false

  # Jurisdiction inclusion settings
  jurisdictions:
    # Include US patents (PatentsView)
    include_us: true
    # Include European patents (EPO OPS)
    include_ep: true
    # Include PCT/WIPO patents (PATENTSCOPE)
    include_wo: true
    # Maximum patents per jurisdiction (null = no limit)
    max_patents_per_jurisdiction: null

  # IPC code prefixes for biomedical domain
  ipc_prefixes:
    - "A61"  # Medical/veterinary science
    - "C07"  # Organic chemistry (including pharmaceuticals)
    - "C12"  # Biochemistry, genetic engineering

  # Publication date range (YYYYMMDD for EPO, YYYY-MM-DD for WIPO)
  publication_date_from: null
  publication_date_to: null

  # Family deduplication: avoid including US+EP+WO versions of same patent
  deduplicate_families: true

  # Target corpus size (~500K-1M for v3.0)
  target_corpus_size: 1000000

  # Random seed for reproducibility
  seed: 42

# Advanced Phases: Multi-Modal Retrieval (v4.0)
# Enables chemical structure and biological sequence similarity search
advanced:
  # Data Harmonization Layer
  harmonization:
    # Enable unified entity system
    enabled: false
    # Database configuration (sqlite or postgresql)
    database:
      backend: "sqlite"
      path: "data/biopat.db"
      # PostgreSQL settings (if backend: postgresql)
      host: "localhost"
      port: 5432
      user: "biopat"
      password: ""
      database: "biopat"
    # Use RDKit for chemical canonicalization (requires rdkit package)
    use_rdkit: true
    # Entity resolution cache size
    cache_size: 10000
    # Cross-reference extraction settings
    extract_doi_from_text: true
    extract_pmid_from_text: true
    extract_sequences_from_claims: true

  # Chemical Structure Matching (v3.1)
  chemical:
    # Enable chemical similarity search
    enabled: false
    # Path to SureChEMBL data (optional, for bulk loading)
    surechembl_path: null
    # Fingerprint settings
    fingerprint_type: "morgan"  # morgan or rdkit
    fingerprint_bits: 2048
    morgan_radius: 2
    # FAISS index settings
    use_gpu: false
    faiss_index_type: "flat"  # flat, ivf, hnsw
    # Tanimoto similarity thresholds for ground truth tiers
    tanimoto_high: 0.85
    tanimoto_medium: 0.7
    tanimoto_low: 0.5

  # Biological Sequence Matching (v3.2)
  sequence:
    # Enable sequence similarity search
    enabled: false
    # Path to BLAST+ database
    blast_db_path: null
    # BLAST type (blastp for protein, blastn for nucleotide)
    blast_type: "blastp"
    # E-value threshold
    evalue_threshold: 1e-5
    # Sequence identity thresholds for ground truth tiers
    identity_high: 0.95
    identity_medium: 0.7
    identity_low: 0.5

  # Trimodal retrieval weights
  text_weight: 0.5
  chemical_weight: 0.3
  sequence_weight: 0.2
